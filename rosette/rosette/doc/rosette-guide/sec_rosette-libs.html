<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>6.2&nbsp;Solver-Aided Libraries</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="guide.css" title="default"/><link rel="stylesheet" type="text/css" href="../racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../manual-racket.css" title="default"/><link rel="stylesheet" type="text/css" href="../doc-site.css" title="default"/><script type="text/javascript" src="../scribble-common.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../manual-racket.js"></script><script type="text/javascript" src="../doc-site.js"></script><script type="text/javascript" src="file:///Applications/Racket%20v8.2/doc/local-redirect/local-redirect.js"></script><script type="text/javascript" src="file:///Users/wangshenyi/Library/Racket/8.2/doc/local-redirect/local-user-redirect.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" data-pltdoc="x">The Rosette Guide</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="ch_getting-started.html" class="tocviewlink" data-pltdoc="x">Getting Started</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="ch_essentials.html" class="tocviewlink" data-pltdoc="x">Rosette Essentials</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="ch_syntactic-forms.html" class="tocviewlink" data-pltdoc="x">Syntactic Forms</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="ch_built-in-datatypes.html" class="tocviewlink" data-pltdoc="x">Built-<wbr></wbr>In Datatypes</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="ch_programmer-defined-datatypes.html" class="tocviewlink" data-pltdoc="x">Structures</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="ch_libraries.html" class="tocviewselflink" data-pltdoc="x">Libraries</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="ch_symbolic-reflection.html" class="tocviewlink" data-pltdoc="x">Symbolic Reflection</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="ch_unsafe.html" class="tocviewlink" data-pltdoc="x">Unsafe Operations</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="ch_performance.html" class="tocviewlink" data-pltdoc="x">Performance</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="ch_error-tracing.html" class="tocviewlink" data-pltdoc="x">Debugging</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="refs.html" class="tocviewlink" data-pltdoc="x">References</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" data-pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>6&nbsp;</td><td><a href="ch_libraries.html" class="tocviewlink" data-pltdoc="x">Libraries</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">6.1&nbsp;</td><td><a href="sec_racket-libs.html" class="tocviewlink" data-pltdoc="x">Exported Racket Libraries</a></td></tr><tr><td align="right">6.2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Solver-<wbr></wbr>Aided Libraries</a></td></tr><tr><td align="right">6.3&nbsp;</td><td><a href="sec_utility-libs.html" class="tocviewlink" data-pltdoc="x">Utility Libraries</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>6.2&nbsp;</td><td><a href="" class="tocviewselflink" data-pltdoc="x">Solver-<wbr></wbr>Aided Libraries</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">6.2.1&nbsp;</td><td><a href="#%28part._.Synthesis_.Library%29" class="tocviewlink" data-pltdoc="x">Synthesis Library</a></td></tr><tr><td align="right">6.2.2&nbsp;</td><td><a href="#%28part._.Angelic_.Execution_.Library%29" class="tocviewlink" data-pltdoc="x">Angelic Execution Library</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">6.2.1<tt>&nbsp;</tt></span><a href="#%28part._.Synthesis_.Library%29" class="tocsubseclink" data-pltdoc="x">Synthesis Library</a></td></tr><tr><td><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._~3f~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">??</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">choose</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>grammar</span></span></a></td></tr><tr><td><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-simple-grammar%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>simple-<wbr></wbr>grammar</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._current-grammar-depth%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>grammar-<wbr></wbr>depth</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._generate-forms%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">generate-<wbr></wbr>forms</span></span></a></td></tr><tr><td><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._print-forms%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">print-<wbr></wbr>forms</span></span></a></td></tr><tr><td><span class="tocsublinknumber">6.2.2<tt>&nbsp;</tt></span><a href="#%28part._.Angelic_.Execution_.Library%29" class="tocsubseclink" data-pltdoc="x">Angelic Execution Library</a></td></tr><tr><td><a href="#%28def._%28%28lib._rosette%2Flib%2Fangelic..rkt%29._choose%2A%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym"><span class="RktValLink">choose*</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">8.2</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.2&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.2&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="sec_racket-libs.html" title="backward to &quot;6.1 Exported Racket Libraries&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="ch_libraries.html" title="up to &quot;6 Libraries&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="sec_utility-libs.html" title="forward to &quot;6.3 Utility Libraries&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4 x-source-module="(lib &quot;rosette/guide/scribble/rosette-guide.scrbl&quot;)" x-source-pkg="rosette" x-part-tag="&quot;sec:rosette-libs&quot;">6.2<tt>&nbsp;</tt><a name="(part._sec~3arosette-libs)"></a>Solver-Aided Libraries</h4><p>In principle, solver-aided programming requires only
symbolic values and the basic constructs described in
Chapter <a href="ch_syntactic-forms_rosette.html" data-pltdoc="x">3</a>. In
practice, however, it is often convenient to work with
richer constructs, which are built on top of these
primitives. Rosette ships with two libraries that provide
such constructs, as well as utility procedures for turning
the results of synthesis queries into code.</p><h5 x-source-module="(lib &quot;rosette/guide/scribble/rosette-guide.scrbl&quot;)" x-source-pkg="rosette" x-part-tag="&quot;Synthesis_Library&quot;">6.2.1<tt>&nbsp;</tt><a name="(part._.Synthesis_.Library)"></a><a name="(mod-path._rosette/lib/synthax)"></a>Synthesis Library</h5><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._rosette%2Flib%2Fsynthax%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">rosette/lib/synthax</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/rosette" title="Install this package using `raco pkg install rosette`"><span class="stt">rosette</span></a></span></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rosette/lib/synthax..rkt)._~3f~3f))"></a><span title="Provided from: rosette/lib/synthax | Package: rosette"><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._~3f~3f%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">??</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-type</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-type</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">type-expr</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">type-expr</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._and%252Fc%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_value-reflection.html#%28def._%28%28lib._rosette%2Fbase%2Fcore%2Ftype..rkt%29._solvable~3f%29%29" class="RktValLink" data-pltdoc="x">solvable?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_value-reflection.html#%28def._%28%28lib._rosette%2Fbase%2Fcore%2Ftype..rkt%29._type~3f%29%29" class="RktValLink" data-pltdoc="x">type?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._not%252Fc%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">not/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_UF.html#%28def._%28%28lib._rosette%2Fbase%2Fcore%2Ffunction..rkt%29._function~3f%29%29" class="RktValLink" data-pltdoc="x">function?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Introduces a constant <a href="ch_essentials.html#%28tech._hole%29" class="techoutside" data-pltdoc="x"><span class="techinside">hole</span></a> into a program&#8212;<wbr></wbr>a
 placeholder for a concrete constant of the given type. The
 default value for <span class="RktVar">type-expr</span>, if one is not
 provided, is <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=number-types.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._integer%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">integer?</a></span>. The <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._~3f~3f%29%29" class="RktStxLink" data-pltdoc="x">??</a></span> construct
 <a href="ch_syntactic-forms_rosette.html#%28part._sec~3asymbolic-constants%29" data-pltdoc="x">creates</a> and returns a
 distinct symbolic constant of type <span class="RktVar">type-expr</span>.</div></p><p>When used in a recursive <a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" data-pltdoc="x">grammar definition</a>,
 a <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._~3f~3f%29%29" class="RktStxLink" data-pltdoc="x">??</a></span> hole generates a fresh constant
 every time it is evaluated, similarly to
 <span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fform%2Fdefine..rkt%29._define-symbolic%2A%29%29" class="RktStxLink" data-pltdoc="x">define-symbolic*</a></span>. Otherwise, a <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._~3f~3f%29%29" class="RktStxLink" data-pltdoc="x">??</a></span> hole
 always generates the same constant, similarly to
 <span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fform%2Fdefine..rkt%29._define-symbolic%29%29" class="RktStxLink" data-pltdoc="x">define-symbolic</a></span>.</p><p>See also <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" class="RktStxLink" data-pltdoc="x">define-grammar</a></span>.</p><p><div class="SIntrapara"><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Uses a ?? hole to sketch a procedure for multiplying</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">an 8-bit number by 2 using a constant left shift.</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvmul2_??</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvshl%29%29" class="RktValLink" data-pltdoc="x">bvshl</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._~3f~3f%29%29" class="RktStxLink" data-pltdoc="x">??</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bitvector%29%29" class="RktValLink" data-pltdoc="x">bitvector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div></p></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">bvmul2_?? hole always returns the same constant:</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">bvmul2_??</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bv</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(bvshl (bv #x01 8) ??:bvmul2:9:12)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">bvmul2_??</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bv</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(bvshl (bv #x03 8) ??:bvmul2:9:12)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fform%2Fdefine..rkt%29._define-symbolic%29%29" class="RktStxLink" data-pltdoc="x">define-symbolic</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bitvector%29%29" class="RktValLink" data-pltdoc="x">bitvector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">bvmul2_??</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(bvshl x ??:bvmul2:9:12)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvmul2_??</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvmul2_??</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Use synthesis to fill the hole with a constant:</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sol</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fquery%2Fform..rkt%29._synthesize%29%29" class="RktStxLink" data-pltdoc="x">synthesize</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:forall</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:guarantee</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._assert%29%29" class="RktStxLink" data-pltdoc="x">assert</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvmul2_??</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvmul%29%29" class="RktValLink" data-pltdoc="x">bvmul</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bv</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktSym">sol</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">(model</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">[??:bvmul2:9:12 (bv #x01 8)])</span></p></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Save bvmul2_?? to a file before calling print-forms.</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._print-forms%29%29" class="RktValLink" data-pltdoc="x">print-forms</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sol</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktOut">(define (bvmul2_?? x) (bvshl x (bv #x01 8)))</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rosette/lib/synthax..rkt)._choose))"></a><span title="Provided from: rosette/lib/synthax | Package: rosette"><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">choose</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">expr</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Introduces a choice <a href="ch_essentials.html#%28tech._hole%29" class="techoutside" data-pltdoc="x"><span class="techinside">hole</span></a> into a program&#8212;<wbr></wbr>a
 placeholder to be filled with one of the given expressions.
 This construct defines <span class="RktVar">n</span>-1 distinct boolean constants
 and uses them to conditionally select one of the <span class="RktVar">n</span>
 provided expressions.</div></p><p>When used in a recursive <a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" data-pltdoc="x">grammar definition</a>,
 a <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span> hole generates fresh selector
 constants and may select a different expression every time
 it is evaluated. Otherwise, a <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span> hole generates
 the same constants and makes the same selection every time.</p><p>See also <span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fangelic..rkt%29._choose%2A%29%29" class="RktValLink" data-pltdoc="x">choose*</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" class="RktStxLink" data-pltdoc="x">define-grammar</a></span>.</p><p><div class="SIntrapara"><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Uses a chooose hole to sketch a procedure for multiplying</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">an 8-bit number by 2 using a constant shift.</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvmul2_choose</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvshl%29%29" class="RktValLink" data-pltdoc="x">bvshl</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvashr%29%29" class="RktValLink" data-pltdoc="x">bvashr</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvlshr%29%29" class="RktValLink" data-pltdoc="x">bvlshr</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._~3f~3f%29%29" class="RktStxLink" data-pltdoc="x">??</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bitvector%29%29" class="RktValLink" data-pltdoc="x">bitvector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div></p></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">bvmul2_choose holes always generate the same constants:</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fform%2Fdefine..rkt%29._define-symbolic%29%29" class="RktStxLink" data-pltdoc="x">define-symbolic</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bitvector%29%29" class="RktValLink" data-pltdoc="x">bitvector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">bvmul2_choose</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">(ite*</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">(&#8866; 0$choose:bvmul2:12:4 (bvshl x ??:bvmul2:12:35))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">(&#8866;</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(&amp;&amp; 1$choose:bvmul2:12:4 (! 0$choose:bvmul2:12:4))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(bvashr x ??:bvmul2:12:35))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">(&#8866;</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(&amp;&amp; (! 0$choose:bvmul2:12:4) (! 1$choose:bvmul2:12:4))</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(bvlshr x ??:bvmul2:12:35)))</span></p></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvmul2_choose</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvmul2_choose</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Use synthesis to fill the holes:</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sol</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fquery%2Fform..rkt%29._synthesize%29%29" class="RktStxLink" data-pltdoc="x">synthesize</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:forall</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:guarantee</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._assert%29%29" class="RktStxLink" data-pltdoc="x">assert</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvmul2_choose</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvmul%29%29" class="RktValLink" data-pltdoc="x">bvmul</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bv</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktSym">sol</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">(model</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">[0$choose:bvmul2:12:4 #t]</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">[1$choose:bvmul2:12:4 #f]</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes">[??:bvmul2:12:35 (bv #x01 8)])</span></p></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Save bvmul2_choose to a file before calling print-forms.</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._print-forms%29%29" class="RktValLink" data-pltdoc="x">print-forms</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sol</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktOut">(define (bvmul2_choose x) (bvshl x (bv #x01 8)))</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><table cellspacing="0" cellpadding="0" class="RktBlk RForeground"><tr><td><span class="RktPn">(</span><a name="(form._((lib._rosette/lib/synthax..rkt)._define-grammar))"></a><span title="Provided from: rosette/lib/synthax | Package: rosette"><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-grammar</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">arg-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">rule-id</span><span class="hspace">&nbsp;</span><span class="RktVar">rule-expr</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></td></tr></table></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defines a macro for creating and filling grammar
 <a href="ch_essentials.html#%28tech._hole%29" class="techoutside" data-pltdoc="x"><span class="techinside">holes</span></a>. The macro uses
 <span class="RktPn">(</span><span class="RktVar">id</span><span class="stt"> </span><span class="RktVar">arg-id</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span> as the pattern for creating holes
 and <span class="RktPn">[</span><span class="RktVar">rule-id</span><span class="stt"> </span><span class="RktVar">rule-expr</span><span class="RktPn">]</span><span class="stt"> </span><span class="RktMeta">...+</span> as the rules for
 filling these holes with expressions. In particular, writing
 <span class="RktPn">(</span><span class="RktVar">id</span><span class="stt"> </span><span class="RktVar">arg-expr</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span> creates a hole for an
 expression derived from the grammar
 <span class="RktPn">[</span><span class="RktVar">rule-id</span><span class="stt"> </span><span class="RktVar">rule-expr</span><span class="RktPn">]</span><span class="stt"> </span><span class="RktMeta">...+</span>, where the pattern
 variables <span class="RktVar">arg-id</span> are instantianted with the hole
 arguments <span class="RktVar">arg-expr</span>.</div></p><p>Each hole defines a local scope that binds the rule names
 <span class="RktVar">rule-id</span> to procedures of the form
 <span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=lambda.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._lambda%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">lambda</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="stt"> </span><span class="RktVar">rule-expr</span><span class="RktPn">)</span>. This scope behaves like
 <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=let.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._letrec%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">letrec</a></span>, so rules can refer to themselves and each
 other via <span class="RktPn">(</span><span class="RktVar">rule-id</span><span class="RktPn">)</span> to specify a recursive grammar.</p><p>For example, the following definition specifies a
 grammar of fast bitvector expressions over one input:</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" class="RktStxLink" data-pltdoc="x">define-grammar</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">expr</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&lt;expr&gt; :=</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._~3f~3f%29%29" class="RktStxLink" data-pltdoc="x">??</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bitvector%29%29" class="RktValLink" data-pltdoc="x">bitvector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> y | &lt;8-bit constant&gt; |</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">bop</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expr</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">expr</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> ((bop) &lt;expr&gt; &lt;expr&gt;)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">bop</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&lt;bop&gt;  :=</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvshl%29%29" class="RktValLink" data-pltdoc="x">bvshl</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvashr%29%29" class="RktValLink" data-pltdoc="x">bvashr</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvlshr%29%29" class="RktValLink" data-pltdoc="x">bvlshr</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> bvshl | bvashr | bvlshr |</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvand%29%29" class="RktValLink" data-pltdoc="x">bvand</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvor%29%29" class="RktValLink" data-pltdoc="x">bvor</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvxor%29%29" class="RktValLink" data-pltdoc="x">bvxor</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> bvand | bvor | bvxor | </span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvadd%29%29" class="RktValLink" data-pltdoc="x">bvadd</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvsub%29%29" class="RktValLink" data-pltdoc="x">bvsub</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> bvadd | bvsub</span></td></tr></table></td></tr></table></blockquote><p>By default, a grammar hole is filled by evaluating the
 first grammar rule <span class="RktPn">(</span><span class="RktVar">rule-id</span><span style="vertical-align: sub; font-size: 80%">0</span><span class="RktPn">)</span>
 in the hole&rsquo;s local scope, and limiting the call stack to include at
 most <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._current-grammar-depth%29%29" class="RktValLink" data-pltdoc="x">current-grammar-depth</a></span><span class="RktPn">)</span> applications of the grammar rules.
 Holes can override these defaults by providing the optional arguments
 <span class="RktPn">#:depth</span><span class="stt"> </span><span class="RktSym">n</span> and <span class="RktPn">#:start</span><span class="stt"> </span><span class="RktVar">rule-id</span><span style="vertical-align: sub; font-size: 80%">k</span>,
 which control the call stack depth and the starting rule, respectively.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Uses a bitfast hole to sketch a procedure consisting</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of a fast bitvector expression over x, created by at</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">most 2 applications of the bitfast grammar rules,</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">following the initial application of the (expr) rule.</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvmul2_bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">#:depth</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote><p>Whenever a grammar hole is evaluated, its constituent
 <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span> and <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._~3f~3f%29%29" class="RktStxLink" data-pltdoc="x">??</a></span> holes generate the same set
 of constants, with each rule application generating a
 distinct subset of this set. This allows different
 applications of the same rule to produce different
 components of the unique expression that fills a grammar
 hole.</p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">The choose and ?? holes that are part of the same bitfast</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">hole always generate the same set of constants:</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fform%2Fdefine..rkt%29._define-symbolic%29%29" class="RktStxLink" data-pltdoc="x">define-symbolic</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bitvector%29%29" class="RktValLink" data-pltdoc="x">bitvector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvmul2_bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvmul2_bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sol</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fquery%2Fform..rkt%29._synthesize%29%29" class="RktStxLink" data-pltdoc="x">synthesize</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:forall</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:guarantee</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._assert%29%29" class="RktStxLink" data-pltdoc="x">assert</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvmul2_bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvmul%29%29" class="RktValLink" data-pltdoc="x">bvmul</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bv</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Save bvmul2_bitfast to a file before calling print-forms.</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._print-forms%29%29" class="RktValLink" data-pltdoc="x">print-forms</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sol</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktOut">(define (bvmul2_bitfast x) (bvshl x (bv #x01 8)))</span></p></td></tr></table></blockquote><p>Grammar rules can include grammar holes as part of their
 definition. An included grammar hole behaves just like an
 included <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span> or <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._~3f~3f%29%29" class="RktStxLink" data-pltdoc="x">??</a></span> hole: it can be
 filled with different expressions in different applications
 of the enclosing rule.</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Specifies a grammar of signed and unsigned</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">comparisons of bitfast expressions.</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" class="RktStxLink" data-pltdoc="x">define-grammar</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitcmp</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">cmp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&lt;cmp&gt; :=</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">op</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> (&lt;op&gt; &lt;bitfast y&gt; &lt;bitfast y&gt;) |</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._and%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cmp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cmp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> (and &lt;cmp&gt; &lt;cmp&gt;)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">op</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">&lt;op&gt;  :=</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvult%29%29" class="RktValLink" data-pltdoc="x">bvult</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvule%29%29" class="RktValLink" data-pltdoc="x">bvule</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> bvult | bvule |</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvslt%29%29" class="RktValLink" data-pltdoc="x">bvslt</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvsle%29%29" class="RktValLink" data-pltdoc="x">bvsle</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt"> bvslt | bvsle</span></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Uses bitcmp and bitfast holes to sketch</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">a procedure with a conditional, intended</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">to implement fast signed division by 2.</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvsdiv2_bitcmp</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitcmp</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fform%2Fdefine..rkt%29._define-symbolic%29%29" class="RktStxLink" data-pltdoc="x">define-symbolic</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bitvector%29%29" class="RktValLink" data-pltdoc="x">bitvector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._current-grammar-depth%29%29" class="RktValLink" data-pltdoc="x">current-grammar-depth</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Set the grammar depth.</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sol</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fquery%2Fform..rkt%29._synthesize%29%29" class="RktStxLink" data-pltdoc="x">synthesize</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:forall</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:guarantee</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._assert%29%29" class="RktStxLink" data-pltdoc="x">assert</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvsdiv2_bitcmp</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvsdiv%29%29" class="RktValLink" data-pltdoc="x">bvsdiv</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bv</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Save bvsdiv2_bitcmp to a file before calling print-forms.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Note that the solver can return any correct solution.</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">In this case, there is a shorter solution that omits the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">trivially true right child from the test expression.</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._print-forms%29%29" class="RktValLink" data-pltdoc="x">print-forms</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sol</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">(define (bvsdiv2_bitcmp x)</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">(if (and (bvult x (bv #x81 8)) (bvsle (bv #x23 8) (bv #x72 8)))</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">(bvashr x (bv #x01 8))</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">(bvadd (bvashr x (bv #x01 8)) (bvand (bv #x01 8) x))))</span></p></td></tr></table></td></tr></table></blockquote></div></p><p>Finally, grammar holes can accept other holes as arguments.
 Unlike included holes, argument holes are <span class="emph">shared</span>
 within the same rule. If an argument <span class="RktVar">arg-id</span> is
 bound to a hole <span class="RktVar">arg-expr</span>, then <span class="emph">all</span> occurrences
 of <span class="RktVar">arg-id</span> in a given rule refer to <span class="emph">one</span>
 shared <span class="RktVar">arg-expr</span> hole, which can be filled with
 different expressions in different applications of the rule.
 In contrast, if a rule explicitly includes <span class="RktVar">arg-expr</span>
 multiple times, then each occurrence of <span class="RktVar">arg-expr</span>
 creates a distinct hole. The following examples illustrate
 the difference and show how to structure grammars to avoid
 unwanted sharing of argument holes.</p><p><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This grammar is intended to take a hole xs</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">as an argument and use it to define the space</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">of signed and unsigned comparisons over the xs</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">expressions. The grammar is the same as bitcmp</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">except that it uses xs instead of (bitfast y)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">in the cmp rule.</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" class="RktStxLink" data-pltdoc="x">define-grammar</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvcmp</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">cmp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Both occurrences of xs</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">op</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">refer to a single shared</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._and%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cmp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cmp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">hole in this rule.</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">op</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvult%29%29" class="RktValLink" data-pltdoc="x">bvult</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvule%29%29" class="RktValLink" data-pltdoc="x">bvule</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvslt%29%29" class="RktValLink" data-pltdoc="x">bvslt</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvsle%29%29" class="RktValLink" data-pltdoc="x">bvsle</a></span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This sketch is the same as bvsdiv2_bitcmp except</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">that it replaces bitcmp with (bvcmp (bitfast x)).</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvsdiv2_bvcmp</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvcmp</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fform%2Fdefine..rkt%29._define-symbolic%29%29" class="RktStxLink" data-pltdoc="x">define-symbolic</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bitvector%29%29" class="RktValLink" data-pltdoc="x">bitvector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._current-grammar-depth%29%29" class="RktValLink" data-pltdoc="x">current-grammar-depth</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">There is no solution because the two xs in the</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">cmp rule of the bvcmp grammar refer to the same</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">hole, so it is not possible for the rule to</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">create a comparison expression with different left</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">and right children (comparing x to a constant).</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fquery%2Fform..rkt%29._synthesize%29%29" class="RktStxLink" data-pltdoc="x">synthesize</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:forall</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:guarantee</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._assert%29%29" class="RktStxLink" data-pltdoc="x">assert</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvsdiv2_bvcmp</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvsdiv%29%29" class="RktValLink" data-pltdoc="x">bvsdiv</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bv</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">(unsat)</span></p></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">To avoid the sharing, we refactor bvcmp to place xs into</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">its own rule, arg, which is then called by cmp. </span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This works because every application of the arg rule</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">can fill its sole xs hole with a different expression.</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" class="RktStxLink" data-pltdoc="x">define-grammar</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvcmp*</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">cmp</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">op</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fletstx-scheme..rkt%2529._and%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">and</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cmp</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">cmp</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">op</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvult%29%29" class="RktValLink" data-pltdoc="x">bvult</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvule%29%29" class="RktValLink" data-pltdoc="x">bvule</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvslt%29%29" class="RktValLink" data-pltdoc="x">bvslt</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvsle%29%29" class="RktValLink" data-pltdoc="x">bvsle</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">arg</span><span class="hspace">&nbsp;</span><span class="RktSym">xs</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">This sketch is the same as bvsdiv2_bitcmp except</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">that it replaces bitcmp with (bvcmp* (bitfast x)).</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvsdiv2_bvcmp*</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvcmp*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bitfast</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fform%2Fdefine..rkt%29._define-symbolic%29%29" class="RktStxLink" data-pltdoc="x">define-symbolic</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bitvector%29%29" class="RktValLink" data-pltdoc="x">bitvector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._current-grammar-depth%29%29" class="RktValLink" data-pltdoc="x">current-grammar-depth</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A solution exists now because the arg rule produces</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">different left and right children for the comparison</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">operator used in the bvsdiv2_bvcmp* conditional test.</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sol</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fquery%2Fform..rkt%29._synthesize%29%29" class="RktStxLink" data-pltdoc="x">synthesize</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:forall</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:guarantee</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._assert%29%29" class="RktStxLink" data-pltdoc="x">assert</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bvsdiv2_bvcmp*</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvsdiv%29%29" class="RktValLink" data-pltdoc="x">bvsdiv</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bv</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Save bvsdiv2_bvcmp* to a file before calling print-forms.</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._print-forms%29%29" class="RktValLink" data-pltdoc="x">print-forms</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sol</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktOut">(define (bvsdiv2_bvcmp* x)</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">(if (bvult x (bv #x81 8))</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">(bvashr (bvashr x (bv #x01 8)) (bv #x00 8))</span></p></td></tr><tr><td><p><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktOut">(bvashr (bvadd x (bv #x01 8)) (bvsub (bv #x49 8) (bv #x48 8)))))</span></p></td></tr></table></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._rosette/lib/synthax..rkt)._define-simple-grammar))"></a><span title="Provided from: rosette/lib/synthax | Package: rosette"><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-simple-grammar%29%29" class="RktStxDef RktStxLink" data-pltdoc="x">define-simple-grammar</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">arg-id</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="RktPn">)</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defines a grammar with a single (possibly recursive) rule. Equivalent to
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" class="RktStxLink" data-pltdoc="x">define-grammar</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktSym">param</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529._......%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>parameter</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rosette/lib/synthax..rkt)._current-grammar-depth))"></a><span title="Provided from: rosette/lib/synthax | Package: rosette"><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._current-grammar-depth%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-grammar-depth</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fmath..rkt%2529._natural%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">natural?</a></span></p></blockquote></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: rosette/lib/synthax | Package: rosette"><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._current-grammar-depth%29%29" class="RktValDef RktValLink" data-pltdoc="x">current-grammar-depth</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528lib._racket%252Fmath..rkt%2529._natural%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">natural?</a></span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="argcontract"><tr><td valign="top"><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span></td><td valign="top"><span class="RktVal">0</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">A parameter that controls the evaluation of
<a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" data-pltdoc="x">grammar</a> holes. Evaluating a
grammar hole involves evaluating the rules of its grammar.
The <span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._current-grammar-depth%29%29" class="RktValLink" data-pltdoc="x">current-grammar-depth</a></span><span class="RktPn">)</span> parameter controls how
many of these rules can appear on the call stack after the
start rule is evaluated. The default value of 0 allows
only the start rule to be evaluated, and a value of
<span class="RktVar">n</span><span class="stt"> </span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3e%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">&gt;</a></span><span class="stt"> </span><span class="RktVal">0</span> allows at most <span class="RktVar">n</span> additional rules to
be added to the call stack. For best performance, keep the
value of this parameter as low as possible.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rosette/lib/synthax..rkt)._generate-forms))"></a><span title="Provided from: rosette/lib/synthax | Package: rosette"><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._generate-forms%29%29" class="RktValDef RktValLink" data-pltdoc="x">generate-forms</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">solution</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fbase..rkt%2529._listof%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=stxops.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._syntax%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">syntax?</a></span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">solution</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_solvers-and-solutions.html#%28def._%28%28lib._rosette%2Fsolver%2Fsolution..rkt%29._solution~3f%29%29" class="RktValLink" data-pltdoc="x">solution?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Given a satisfiable <span class="RktSym"><a href="sec_solvers-and-solutions.html#%28def._%28%28lib._rosette%2Fsolver%2Fsolution..rkt%29._solution~3f%29%29" class="RktValLink" data-pltdoc="x">solution?</a></span> to a
<span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fquery%2Fform..rkt%29._synthesize%29%29" class="RktStxLink" data-pltdoc="x">synthesize</a></span> query, returns a list of <a href="ch_essentials.html#%28tech._sketch%29" class="techoutside" data-pltdoc="x"><span class="techinside">sketch</span></a>
completions for that query. Sketch completions can only be
generated for programs that have been saved to disk.</div></p><p>This procedure cooperates with the constructs in the
<span class="RktSym">rosette/lib/synthax</span> library to turn solutions into
code. It works by scanning program files for
<a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._~3f~3f%29%29" data-pltdoc="x">constant</a>, <a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" data-pltdoc="x">choice</a>, and
<a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" data-pltdoc="x">grammar</a> holes, and replacing
all identified holes with code. The code for a hole is
computed from the <span class="RktVar">solution</span> bindings for the
symbolic constants generated by the hole. Holes are
identified by their original names: <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._~3f~3f%29%29" class="RktStxLink" data-pltdoc="x">??</a></span>,
<span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span>, and any <span class="RktSym">id</span> introduced by
<span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-grammar%29%29" class="RktStxLink" data-pltdoc="x">define-grammar</a></span> or <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._define-simple-grammar%29%29" class="RktStxLink" data-pltdoc="x">define-simple-grammar</a></span>.
If a program uses different names for these holes (e.g., by
renaming them in a <span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">require</a></span> clause),
<span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._generate-forms%29%29" class="RktValLink" data-pltdoc="x">generate-forms</a></span> will not recognize or replace them,
even if the given solution has bindings for their symbolic
constants.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rosette/lib/synthax..rkt)._print-forms))"></a><span title="Provided from: rosette/lib/synthax | Package: rosette"><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._print-forms%29%29" class="RktValDef RktValLink" data-pltdoc="x">print-forms</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">solution</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=void.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._void%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">solution</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="sec_solvers-and-solutions.html#%28def._%28%28lib._rosette%2Fsolver%2Fsolution..rkt%29._solution~3f%29%29" class="RktValLink" data-pltdoc="x">solution?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Pretty-prints the result of applying <span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._generate-forms%29%29" class="RktValLink" data-pltdoc="x">generate-forms</a></span> to the given
 <span class="RktVar">solution</span>. Sketch completions can only be generated and printed
for programs that have been saved to disk.</div></p><h5 x-source-module="(lib &quot;rosette/guide/scribble/rosette-guide.scrbl&quot;)" x-source-pkg="rosette" x-part-tag="&quot;Angelic_Execution_Library&quot;">6.2.2<tt>&nbsp;</tt><a name="(part._.Angelic_.Execution_.Library)"></a><a name="(mod-path._rosette/lib/angelic)"></a>Angelic Execution Library</h5><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="stt"> </span><a href="#%28mod-path._rosette%2Flib%2Fangelic%29" class="RktModLink" data-pltdoc="x"><span class="RktSym">rosette/lib/angelic</span></a><span class="RktPn">)</span></td><td align="right"><span class="RpackageSpec"><span class="Smaller">&nbsp;package:</span> <a href="https://pkgs.racket-lang.org/package/rosette" title="Install this package using `raco pkg install rosette`"><span class="stt">rosette</span></a></span></td></tr></table></p><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._rosette/lib/angelic..rkt)._choose*))"></a><span title="Provided from: rosette/lib/angelic | Package: rosette"><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fangelic..rkt%29._choose%2A%29%29" class="RktValDef RktValLink" data-pltdoc="x">choose*</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=data-structure-contracts.html%23%2528def._%2528%2528lib._racket%252Fcontract%252Fprivate%252Fmisc..rkt%2529._any%252Fc%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">any/c</a></span></td></tr></table></blockquote><p>Symbolically chooses one of the provided values. The
procedure creates <span class="RktVar">n</span>-1 fresh symbolic boolean constants
every time it is evaluated, and uses these constants to
conditionally select one of the <span class="RktVar">n</span> provided
expressions.</p><p>The <span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fangelic..rkt%29._choose%2A%29%29" class="RktValLink" data-pltdoc="x">choose*</a></span> procedure is related to the
<span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span> construct from the synthesis library.
Semantically, the difference between <span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fangelic..rkt%29._choose%2A%29%29" class="RktValLink" data-pltdoc="x">choose*</a></span> and
<span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span> is analogous to the difference between
<span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fform%2Fdefine..rkt%29._define-symbolic%2A%29%29" class="RktStxLink" data-pltdoc="x">define-symbolic*</a></span> and <span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fform%2Fdefine..rkt%29._define-symbolic%29%29" class="RktStxLink" data-pltdoc="x">define-symbolic</a></span>.</p><p>They also differ in how they are typically used:
<span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span> is used primarily for synthesis, while
<span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fangelic..rkt%29._choose%2A%29%29" class="RktValLink" data-pltdoc="x">choose*</a></span> is suitable for both synthesis (via the
<span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fquery%2Fform..rkt%29._synthesize%29%29" class="RktStxLink" data-pltdoc="x">synthesize</a></span> query) and angelic execution (via the
<span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fquery%2Fform..rkt%29._solve%29%29" class="RktStxLink" data-pltdoc="x">solve</a></span> query).</p><p>In the context of synthesis, <span class="RktSym"><a href="#%28form._%28%28lib._rosette%2Flib%2Fsynthax..rkt%29._choose%29%29" class="RktStxLink" data-pltdoc="x">choose</a></span> is used to
sketch programs in (a subset of) the Rosette language, and
<span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fangelic..rkt%29._choose%2A%29%29" class="RktValLink" data-pltdoc="x">choose*</a></span> can be used to sketch programs in any
language that has a Rosette-based interpreter.</p><p><div class="SIntrapara">Examples:</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=require.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._require%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">rosette/lib/angelic</span><span class="hspace">&nbsp;</span><span class="RktSym">rosette/lib/destruct</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">BV</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bitvector%29%29" class="RktValLink" data-pltdoc="x">bitvector</a></span><span class="hspace">&nbsp;</span><span class="RktVal">8</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">A toy language for programs that manipulate a</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">a single storage cell by adding a constant to</span></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">it, multiplying it by constant, and squaring it.</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Add</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:transparent</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Mul</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">#:transparent</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define-struct.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._struct%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">struct</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Sqr</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">#:transparent</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interpret</span><span class="hspace">&nbsp;</span><span class="RktSym">prog</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">acc</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bv</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">BV</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._null%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">null?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">acc</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interpret</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cdr%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">cdr</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_utility-libs.html#%28form._%28%28lib._rosette%2Flib%2Fdestruct..rkt%29._destruct%29%29" class="RktStxLink" data-pltdoc="x">destruct</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._car%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">car</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prog</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">Add</span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvadd%29%29" class="RktValLink" data-pltdoc="x">bvadd</a></span><span class="hspace">&nbsp;</span><span class="RktSym">acc</span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">Mul</span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvmul%29%29" class="RktValLink" data-pltdoc="x">bvmul</a></span><span class="hspace">&nbsp;</span><span class="RktSym">acc</span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">Sqr</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvmul%29%29" class="RktValLink" data-pltdoc="x">bvmul</a></span><span class="hspace">&nbsp;</span><span class="RktSym">acc</span><span class="hspace">&nbsp;</span><span class="RktSym">acc</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=stx-patterns.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fstxcase-scheme..rkt%2529.__%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">_</a></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">acc</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Creates a symbolic instruction (a hole) in the toy language.</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">inst*</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fform%2Fdefine..rkt%29._define-symbolic%2A%29%29" class="RktStxLink" data-pltdoc="x">define-symbolic*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">arg</span><span class="hspace">&nbsp;</span><span class="RktSym">BV</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#%28def._%28%28lib._rosette%2Flib%2Fangelic..rkt%29._choose%2A%29%29" class="RktValLink" data-pltdoc="x">choose*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Add</span><span class="hspace">&nbsp;</span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Mul</span><span class="hspace">&nbsp;</span><span class="RktSym">arg</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Sqr</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Creates a toy program consisting of n symbolic instructions.</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">prog*</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=if.html%23%2528form._%2528%2528quote._%7E23%7E25kernel%2529._if%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._%7E3c%7E3d%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._cons%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">cons</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">inst*</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">prog*</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=generic-numbers.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._-%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div></p><blockquote class="SCodeFlow"><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fform%2Fdefine..rkt%29._define-symbolic%29%29" class="RktStxLink" data-pltdoc="x">define-symbolic</a></span><span class="hspace">&nbsp;</span><span class="RktSym">acc</span><span class="hspace">&nbsp;</span><span class="RktSym">BV</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prog</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">prog*</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&gt; </span><span class="RktSym">prog</span></td></tr><tr><td><table cellspacing="0" cellpadding="0"><tr><td><p><span class="RktRes">'((union</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">[xi?$1 #(struct:Add arg$0)]</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">[(&amp;&amp; xi?$2 (! xi?$1)) #(struct:Mul arg$0)]</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">[(&amp;&amp; (! xi?$1) (! xi?$2)) #(struct:Sqr)])</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(union</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">[xi?$4 #(struct:Add arg$3)]</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">[(&amp;&amp; xi?$5 (! xi?$4)) #(struct:Mul arg$3)]</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">[(&amp;&amp; (! xi?$4) (! xi?$5)) #(struct:Sqr)])</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">(union</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">[xi?$7 #(struct:Add arg$6)]</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">[(&amp;&amp; xi?$8 (! xi?$7)) #(struct:Mul arg$6)]</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;</span><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">[(&amp;&amp; (! xi?$7) (! xi?$8)) #(struct:Sqr)]))</span></p></td></tr></table></td></tr><tr><td><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Complete prog so that it implements 3 * acc^2 - 1 for all acc.</span></td></tr><tr><td><table cellspacing="0" cellpadding="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=define.html%23%2528form._%2528%2528lib._racket%252Fprivate%252Fbase..rkt%2529._define%2529%2529&amp;version=8.2" class="RktStxLink Sq" data-pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">sol</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fquery%2Fform..rkt%29._synthesize%29%29" class="RktStxLink" data-pltdoc="x">synthesize</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:forall</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=pairs.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._list%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">acc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:guarantee</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="ch_syntactic-forms_rosette.html#%28form._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._assert%29%29" class="RktStxLink" data-pltdoc="x">assert</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="https://download.racket-lang.org/releases/8.2/doc/local-redirect/index.html?doc=reference&amp;rel=Equality.html%23%2528def._%2528%2528quote._%7E23%7E25kernel%2529._equal%7E3f%2529%2529&amp;version=8.2" class="RktValLink Sq" data-pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">interpret</span><span class="hspace">&nbsp;</span><span class="RktSym">prog</span><span class="hspace">&nbsp;</span><span class="RktSym">acc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvsub%29%29" class="RktValLink" data-pltdoc="x">bvsub</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sec_bitvectors.html#%28def._%28%28lib._rosette%2Fbase%2Fbase..rkt%29._bvmul%29%29" class="RktValLink" data-pltdoc="x">bvmul</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bv</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="hspace">&nbsp;</span><span class="RktSym">BV</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">acc</span><span class="hspace">&nbsp;</span><span class="RktSym">acc</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">bv</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktSym">BV</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="sec_solvers-and-solutions.html#%28def._%28%28lib._rosette%2Fquery%2Fquery..rkt%29._evaluate%29%29" class="RktValLink" data-pltdoc="x">evaluate</a></span><span class="hspace">&nbsp;</span><span class="RktSym">prog</span><span class="hspace">&nbsp;</span><span class="RktSym">sol</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">(list (Sqr) (Add (bv #x55 8)) (Mul (bv #x03 8)))</span></p></td></tr></table></blockquote><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" id="searchbox" type="text" tabindex="1" placeholder="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;8.2&quot;, &quot;../&quot;);"/></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" data-pltdoc="x" onclick="return GotoPLTRoot(&quot;8.2&quot;);">top</a></span><span class="navright">&nbsp;&nbsp;<a href="sec_racket-libs.html" title="backward to &quot;6.1 Exported Racket Libraries&quot;" data-pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="ch_libraries.html" title="up to &quot;6 Libraries&quot;" data-pltdoc="x">up</a>&nbsp;&nbsp;<a href="sec_utility-libs.html" title="forward to &quot;6.3 Utility Libraries&quot;" data-pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>